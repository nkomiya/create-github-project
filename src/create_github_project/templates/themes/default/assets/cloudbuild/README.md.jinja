# Cloud Build

## Build 構成ファイル

本フォルダにて管理する、Cloud Build の Build 構成ファイルは下記の通り。

|ファイル名|用途|
|:--|:--|
|[ci.yaml](./ci.yaml)|テスト実行|
|[cd.yaml](./cd.yaml)|デプロイ実行|

### ファイル詳細

#### ci.yaml

この Build 構成ファイルでは、Cloud Build 上で実行する自動テストを定義する。

本ファイルによる Build は、GitHub 上にて下記ブランチへのプルリクエストが作成された際に起動する。

1. develop
1. {{ production_branch }}

#### cd.yaml

この Build 構成ファイルでは、各 GCP 環境へのデプロイ処理の定義を行う。

デプロイ先の GCP 環境、およびデプロイの契機は下記の表の通り。

|環境|デプロイ契機|
|:--|:--|
|dev 環境|develop ブランチへの push|
|stg 環境|{{ production_branch }} ブランチへの push|
|prd 環境|タグ `v*` の push|
